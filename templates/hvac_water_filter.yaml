# Provides the age of the HVAC filter and the Refrigerator Water
# filter in days so that we can do some automations

- unique_id: 3848a24441de4c14bba684048e22dd32
  trigger:
    - trigger: time_pattern
      hours: "1"
      minutes: "32"
    - trigger: state
      entity_id:
        - "input_datetime.refrigerator_water_filter"
  sensor:
    - name: Refrigerator Water Filter Age in Days
      unique_id: "3848a244-41de-4c14-bba6-84048e22dd32"
      unit_of_measurement: "days"
      state: >
        {{ ((as_timestamp(now()) - as_timestamp(states('input_datetime.refrigerator_water_filter'))) / 86400) | round(0) }}

- unique_id: 95c053c3b94b4b47af568cd6c3260b56
  trigger:
    - trigger: time_pattern
      hours: "1"
      minutes: "32"
    - trigger: state
      entity_id:
        - "input_datetime.main_bathroom_shower_filter"
  sensor:
    - name: Main Shower Filter Age in Days
      unique_id: "95c053c3-b94b-4b47-af56-8cd6c3260b56"
      unit_of_measurement: "days"
      state: >
        {{ ((as_timestamp(now()) - as_timestamp(states('input_datetime.main_bathroom_shower_filter'))) / 86400) | round(0) }}
